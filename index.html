<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Intelligent CPU Scheduler Simulator</title>

<style>
:root{
  --bg-light:#f8fafc;
  --card-light:#ffffff;
  --border:#cbd5e1;
  --text:#0f172a;
  --accent:#4f46e5;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}

body{
  margin:0;
  background: linear-gradient(180deg, #f8fafc, #e2e8f0);
  color: #0a0b0a;
  min-height: 100vh;
  padding: 28px;
}


/* Layout */
.wrap{
  max-width:1200px;
  margin:0 auto;
  display:grid;
  gap:18px;
  grid-template-columns:460px 1fr;
}

/* Cards */
.card{
  background:var(--card-light);
  padding:16px;
  border-radius:12px;
  box-shadow:0 8px 24px rgba(0,0,0,0.08);
}

/* Inputs */
textarea,input,select{
  width:100%;
  background:#f1f5f9;
  color:var(--text);
  padding:8px;
  border-radius:8px;
  border:1px solid var(--border);
  margin-bottom:10px;
}

select option{
  background:#ffffff;
  color:#0f172a;
}

/* Buttons */
button{
  background:var(--accent);
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:10px;
  cursor:pointer;
}

button.secondary{
  background:none;
  color:#475569;
  border:1px solid var(--border);
}

/* Table */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th,td{
  padding:8px;
  border-bottom:1px solid var(--border);
  text-align:center;
}

/* Gantt */
canvas{
  width:100%;
  height:260px;
  background:#e5e7eb;
  border-radius:8px;
}

/* Legend */
.legend{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

.color-box{
  width:14px;
  height:14px;
  border-radius:4px;
}

/* Footer */
footer{
  grid-column:1/-1;
  text-align:center;
  color:#475569;
  font-size:13px;
  margin-top:20px;
}

/* Responsive */
@media(max-width:980px){
  .wrap{grid-template-columns:1fr;}
}
</style>
</head>

<body>
<div class="wrap">

<!-- LEFT PANEL -->
<div class="card">
<h2>Intelligent CPU Scheduler Simulator</h2>

<label>Process list (PID,Arrival,Burst,Priority)</label>
<textarea id="procInput" rows="8">P1,0,5,2
P2,1,3,1
P3,2,8,3
P4,3,6,2</textarea>

<label>Algorithm</label>
<select id="algoSelect">
<option>FCFS</option>
<option>SJF</option>
<option>RR</option>
<option>Priority</option>
</select>

<label>Preemptive?</label>
<select id="preemptSelect">
<option value="false">No</option>
<option value="true">Yes</option>
</select>

<label>Time Quantum</label>
<input id="quantum" value="2"/>

<div style="margin-top:10px">
<button id="runBtn">RUN</button>
<button id="clearBtn" class="secondary">CLEAR</button>
</div>

<table>
<thead>
<tr>
<th>PID</th>
<th>Arrival</th>
<th>Burst</th>
<th>Waiting</th>
<th>Turnaround</th>
</tr>
</thead>
<tbody id="metricsBody"></tbody>
<tfoot>
<tr>
<td colspan="3"><b>Average</b></td>
<td id="avgWait">-</td>
<td id="avgTurn">-</td>
</tr>
</tfoot>
</table>
</div>

<!-- RIGHT PANEL -->
<div class="card">
<div class="legend" id="legend"></div>
<canvas id="gantt"></canvas>
<pre id="scheduleText"></pre>
</div>

<footer>
Â© 2025 | Intelligent CPU Scheduler Simulator | Kanak Kr Raj
</footer>

</div>

<script>
'use strict';

function parseInput(text){
  return text.split('\n').filter(Boolean).map(l=>{
    const [pid,a,b,p=0]=l.split(',');
    return { pid, arrival:+a, burst:+b, rem:+b, burstOriginal:+b };
  });
}

function uidColor(i){
  const hues=[210,170,120,60,300,330];
  return `hsl(${hues[i%hues.length]},70%,55%)`;
}

function fcfs(p){
  let t=0, s=[];
  p.sort((a,b)=>a.arrival-b.arrival);
  for(const x of p){
    if(t<x.arrival){
      s.push({pid:'Idle',start:t,end:x.arrival});
      t=x.arrival;
    }
    s.push({pid:x.pid,start:t,end:t+x.burst});
    t+=x.burst;
  }
  return s;
}

function metrics(schedule,procs){
  const finish={};
  schedule.forEach(s=>finish[s.pid]=s.end);

  let aw=0,at=0;
  metricsBody.innerHTML="";

  for(const p of procs){
    const tat=finish[p.pid]-p.arrival;
    const wt=tat-p.burstOriginal;
    aw+=wt; at+=tat;

    metricsBody.innerHTML+=`
    <tr>
      <td>${p.pid}</td>
      <td>${p.arrival}</td>
      <td>${p.burstOriginal}</td>
      <td>${wt}</td>
      <td>${tat}</td>
    </tr>`;
  }

  avgWait.textContent=(aw/procs.length).toFixed(2);
  avgTurn.textContent=(at/procs.length).toFixed(2);
}

function draw(schedule){
  const c=gantt;
  const ctx=c.getContext("2d");
  c.width=c.clientWidth;
  c.height=c.clientHeight;
  ctx.clearRect(0,0,c.width,c.height);

  let x=20;
  schedule.forEach((s,i)=>{
    const w=(s.end-s.start)*40;
    ctx.fillStyle=uidColor(i);
    ctx.fillRect(x,100,w,30);
    ctx.fillStyle="#000";
    ctx.fillText(s.pid,x+w/2,120);
    ctx.fillText(s.start,x,140);
    ctx.fillText(s.end,x+w,140);
    x+=w;
  });
}

runBtn.onclick=()=>{
  const p=parseInput(procInput.value);
  const sch=fcfs(p);
  scheduleText.textContent=sch.map(s=>`${s.pid} [${s.start}, ${s.end}]`).join('\n');
  metrics(sch,p);
  draw(sch);
};

clearBtn.onclick=()=>{
  procInput.value="";
  metricsBody.innerHTML="";
  scheduleText.textContent="";
  gantt.getContext("2d").clearRect(0,0,gantt.width,gantt.height);
};
</script>

</body>
</html>
